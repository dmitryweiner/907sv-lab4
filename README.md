# Лабораторная №4 по теме "Redux"
Разработка ведётся по методологии TDD: вначале пишем тесты, потом пишем компонент, который проходит тесты.
Если это тяжело психологически, можно параллельно писать компонент и тест.

В этой лабораторной надо реализовать динамический список с фильтрацией и поиском. Примерный скриншот:

![screenshot](https://github.com/dmitryweiner/907sv-lab4/blob/main/screen.png)

## Задание 1
* Аккуратно перенести компоненты и стор из третьей лабы.
* Прикрутить [Redux Provider](https://react-redux.js.org/introduction/quick-start#provider).
* В компонентах использовать useSelect и useDispatch вместо пробрасывания state и dispatch.

### Беды с переносом
Можно столкнуться с проблемой неудовлетворённых зависимостей при выполнении ```npm i```. Чтобы так не было,
желательно перенести из предыдущей лабы не только код, но и конфиги
(```package.json```, ```package-lock.json```, ```tsconfig.json``` и другие).

Если перенос конфигов не помог:
```shell
rm -rf node_modules
rm package-lock.json
npm install --legacy-peer-deps
```

## Задание 2
* Сделать в фильтре набор значений (селектбокс/радиобатон/нажимаемые ссылки): "все", "сделанные", "не сделанные".
  * При изменении складываем в стор.
* Сделать в фильтре текстовое поле поиска.
  * Складывать введённое значение в стор.
* Показывать в списке элементы с учётом фильтра: 
  * Элементы, у которых в title встречается строка, введённая в поле (_регистронезависимо_).
  * Элементы с учётом выполненности.

## Задание 3
Расширить валидацию в форме. Помимо предыдущей валидации, когда нельзя было создать пустой элемент, добавить
невозможность создать элемент с уже существующим title.

## Задание 4 _[опционально, пригодится в lab5]_
Сделать под списком элементов вывод: "Всего N штук," выводящий актуальное количество элементов в текущем списке.

По возможности написать для подсчёта селекторы. По возможности оформить элемент в виде компонента.  

## Задание 5 _[опционально, пригодится в lab5]_
* Сделать компонент Alert, показывающий всплывающий и исчезающий массив ошибок.
* Ошибки показываются, потом скрываются через 3 секунды.
* Ошибки хранятся в сторе в state.errors:
  * messages: string[];
  * isShowing: boolean;
* Показывать ошибку при попытке создать пустой элемент.
* Показывать ошибку при попытке создать элемент с таким же title.
* Когда все ошибки показаны, сбрасывать флаг ошибки, очищать messages.

## Требования к компонентам:
### ListItem, List
(те же требования, что и в третьей лабе)

### Form
Те же, что и в третьей лабе + валидация на уникальность.

### Filter
* Отображает селектбокс с вариантами фильтрации "все", "сделанные", "не сделанные".
* Отображает поле ввода, при вводе в которое осуществляется фильтрация по подстроке.

### Alert _[опционально]_
* Пропсы:
  * isShown: boolean; при изменении в true начинается показ сообщений.
  * messages: string[]; список показываемых сообщений.
  * delay: number = 3000; через сколько миллисекунд скрывать.
  * onClose: () => {}; обработчик закрытия.
* Можно сделать кнопку досрочного закрытия.

### Store
* В сторе хранится текущее состояние приложения:
  * Массив элементов.
  * Текущее значение фильтра состояния (все/сделанные/не сделанные).
  * Текущее значение фильтра подстроки.

### Filter
* Выдаёт актуальный список элементов в соответствии со значениями фильтров.
* Можно комбинировать селекторы:
  * Написать селектор по подстроке.
  * Написать селектор по состоянию.
  * Вызвать один по результатам другого: ```selectBySearchString(selectByFilter(state))```.

## Что почитатать:
* [Лекция по Redux](https://dmitryweiner.github.io/lectures/Redux.html).
* [Видео лекции]().
* [Документация](https://redux.js.org/api/api-reference).
* [Учебник](https://redux.js.org/tutorials/fundamentals/part-1-overview).
* [Статья на русском](https://tproger.ru/translations/redux-for-beginners/)
